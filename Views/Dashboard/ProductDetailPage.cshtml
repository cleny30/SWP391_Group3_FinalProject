@model SWP391_Group3_FinalProject.Models.Product




@{
    ViewData["Title"] = "ProductDetailPage";
    Layout = "~/Views/Shared/_Layout_Dashboard.cshtml";
}

<div class="body-wrapper">
    <div class="container">
        <div class="container">
            <h1 class="Header">PRODUCTS MANAGEMENT</h1>
            <div class="tabs">
                <div class="tabby-tab">
                    <input type="radio" id="tab-1" name="tabby-tabs" checked>
                    <label for="tab-1" class="tabby-tablabel">PRODUCT INFORMATION</label>
                    <div class="tabby-content">
                        <!-- Product Info here-->
                        <div id="" class="col-12">
                            <div class="col-12" style="text-align: center; padding: 10px;">
                                <h1 class="Title">PRODUCT INFORMATION</h1>

                            </div>
                            <form method="POST" action="" id="" class="" enctype="multipart/form-data">
                                <div class="row">

                                    <div class="form-group" style="text-align: center;">
                                        <button type="button" id="removeReadonlyButton"
                                                class="btn btn-outline-primary m-1" onclick="showDeleteButtons()">
                                            Enable Editing
                                        </button>
                                        <h3 id="messagehidden" style="color:red;">
                                            The table is currently
                                            readonly, clicked the above button to enable editing
                                        </h3>
                                    </div>

                                    <!--Product Name -->
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="label" for="pro_name">Product Name</label>
                                            <input type="text" class="form-control" name="pro_name"
                                                   id="pro_name" value="@Model.pro_name" readonly>
                                            <!--Get Value from Database-->
                                        </div>
                                    </div>
                                    <!--Product Name -->
                                    <!--Price -->
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="label" for="pro_price">Price</label>
                                            <input type="number" class="form-control" name="pro_price"
                                                   id="pro_price" value="@Model.pro_price" readonly> 
                                            <!--Get Value from Database-->
                                        </div>
                                    </div>
                                    <!--Price -->
                                    <!--Price -->
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="label" for="pro_price">Discount Percent</label>
                                            <input type="number" class="form-control" name="discount_percent"
                                                   id="pro_price" value="@Model.discount" readonly> 
                                            <!--Get Value from Database-->
                                        </div>
                                    </div>
                                    <!--Price -->
                                    <!--Categories -->
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="label" for="category">Category</label>

                                            <select name="cate_id" class="form-control" id="cate_id" disabled>
                                                @foreach (var category in ViewBag.CategoryList)
                                                {
                                                    <option value="@category.cate_id" @(Model.cate_id == category.cate_id ? "selected" : "")>@category.cate_name</option>
                                                }
                                            </select>

                                        </div>
                                    </div>
                                    <!--Categories -->
                                    <!--Brands -->
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="label" for="brand">Brand</label>

                                            <select name="brand_id" class="form-control" id="brand_id" disabled>
                                                @foreach (var brand in ViewBag.BrandList)
                                                {
                                                    <option value="@brand.brand_id" @(Model.brand_id == brand.brand_id ? "selected" : "")>@brand.brand_name</option>
                                                }
                                            </select>

                                        </div>
                                    </div>
                                    <!--Brands -->
                                    <!--Add Images -->
                                    <div class="col-md-6 ">
                                        <h1 class="Title" style="padding: 10px;">Images List</h1>
                                        <div id="room_fileds_image">
                                            <div class="content">
                                                <!--Foreach cho hình ảnh đã có sẵn trong database theo ID của sản phẩm-->

                                                @foreach (var pictures in ViewBag.ProductImage)
                                                {
                                                    <img src="@pictures"
                                                         alt="Smiley face" class="imgStyle" width="200"
                                                         height="200" title="Original Image" />  <!--Src lấy trên database-->

                                                    <div class="hidden" style="display: none;">
                                                        <input class="form-control" type="file">
                                                        <label style="color: red;">
                                                            Input a new file to change
                                                            the image
                                                        </label>
                                                    </div>
                                                }

                                                <!--Foreach-->
                                            </div>
                                        </div>
                                        <br>
                                        <input class="btn btn-outline-primary m-1" type="button"
                                               id="more_fieldsimage" onclick="add_fieldsImage();"
                                               value="Add new Image" style="display: none;" />
                                    </div>
                                    <div class="col-md-6 ">
                                        <h1 class="Title" style="padding: 10px;">Attribute List</h1>

                                        <!--Add Attribute-->
                                        <div id="room_fileds">
                                            <div class="content">
                                                <!--Foreach lấy trong database theo ID của sản phẩm-->
                                                @foreach (var pair in ViewBag.ProductAttribute)
                                                {
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <div class="">
                                                                <label for="attname">Attribute</label>
                                                                <input class="form-control" type="text" name="feature" value="@pair.Key" id="attname" readonly>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="">
                                                                <label for="attDes">Attribute Description</label>
                                                                <input class="form-control" type="text" name="description" value=" @pair.Value" id="attDes" readonly>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group" style="padding-top: 21px;">
                                                                <!-- Adjust padding-top as needed -->
                                                                <button class="btn btn-danger delete-button" style="display:none;" onclick="toggleButtonDisplay(this); deleteAttribute(this)">X</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }

                                                <script>
                                                    function deleteAttribute(button) {
                                                        // Find the parent row of the button
                                                        var row = button.parentElement.parentElement;

                                                        // Remove the entire row containing the attribute and description
                                                        row.remove();
                                                    }
                                                </script>

                                                <!--Foreach-->
                                            </div>
                                        </div>
                                        <br>
                                        <input class="btn btn-outline-primary m-1" type="button"
                                               id="more_fields" onclick="add_fieldsDetails();"
                                               value="Add new Details" style="display: none;" />
                                    </div>
                                    <!--Add Attribute-->
                                    <hr style="padding: 10px; ">
                                    <!--Description -->
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label class="label" for="#">Description</label>
                                            <textarea name="pro_des" class="form-control" id="message"
                                                      cols="30" rows="10" placeholder="Description"
                                                      readonly> @Model.pro_des</textarea>
                                        </div> <!--Get Value trên Database-->
                                    </div>
                                    <!--Description -->

                                    <div class="col-md-12">
                                        <div class="form-group"
                                             style="text-align: center; padding-top: 20px;">
                                            <input type="submit" value="Submit" class="btn btn-primary"
                                                   id="hiddenButton" style="display: none;">
                                            <button id="resetButton" style="display: none;"
                                                    class="btn btn-secondary">
                                                Reset
                                            </button>
                                            <div class="submitting"></div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- Product Info here-->




                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    var room = 0;
    function add_fieldsDetails() {
        room++;
        var objTo = document.getElementById('room_fileds')
        var divtest = document.createElement("div");
        divtest.innerHTML = `
    <div class="row">
        <div class="col-md-3">
            <div class="">
                <label for="attname">Attribute</label>
                <input class="form-control" type="text" name="feature" value="" id="attname" readonly>
            </div>
        </div>
        <div class="col-md-6">
            <div class="">
                <label for="attDes">Attribute Description</label>
                <input class="form-control" type="text" name="description" value="" id="attDes" readonly>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group" style="padding-top: 21px;">
                <button class="btn btn-danger delete-button" onclick=" deleteAttribute(this)">X</button>
            </div>
        </div>
    </div>
    `;

        objTo.appendChild(divtest)
    }
</script>
<script>

    var room_image = 0;
    var img = 1;
    function add_fieldsImage() {
        room_image++;
        img++;
        var objTo = document.getElementById('room_fileds_image')
        var divtest = document.createElement("div");
        divtest.innerHTML = ' <label>Image ' + room_image + '</label> <input class="form-control" type="file" name="imgFile"> ';

        objTo.appendChild(divtest)
    }
</script>

<script>
    document.getElementById('removeReadonlyButton').addEventListener('click', function () {
        document.getElementById('pro_name').removeAttribute('readonly');
        document.getElementById('pro_price').removeAttribute('readonly');
        document.getElementById('message').removeAttribute('readonly');
        document.getElementById('attname').removeAttribute('readonly');
        document.getElementById('attDes').removeAttribute('readonly');
        document.getElementById('cate_id').removeAttribute('disabled');
        document.getElementById('brand_id').removeAttribute('disabled');
        var hiddenButton = document.getElementById('hiddenButton');
        if (hiddenButton.style.display === 'none') {
            hiddenButton.style.display = 'inline';
        }
        var hiddenButton = document.getElementById('resetButton');
        if (hiddenButton.style.display === 'none') {
            hiddenButton.style.display = 'inline';
        }

        var hiddenButton = document.getElementById('more_fieldsimage');
        if (hiddenButton.style.display === 'none') {
            hiddenButton.style.display = 'inline';
        }


        var hiddenButton = document.getElementById('more_fields');
        if (hiddenButton.style.display === 'none') {
            hiddenButton.style.display = 'inline';
        }

        var hiddenButton = document.getElementById('messagehidden');
        hiddenButton.style.display = 'none';


    });
</script>

<script>
    function toggleButtonDisplay(button) {
        if (button.style.display === 'none') {
            button.style.display = 'inline';
        } else {
            button.style.display = 'none';
        }
    }

    function showDeleteButtons() {
        var deleteButtons = document.querySelectorAll('.delete-button'); // Select all elements with class 'delete-button'
        deleteButtons.forEach(function (button) {
            button.style.display = 'inline';
        });
    }

</script>

<script>
    document.getElementById('resetButton').addEventListener('click', function () {
        location.reload();
    });
</script>

<script>
    var showButtons = document.getElementById('removeReadonlyButton');
    var hiddenDivs = document.querySelectorAll('.hidden');
    var divsVisible = false;

    showButtons.addEventListener('click', function () {
        hiddenDivs.forEach(function (div) {
            div.style.display = 'block';
        });
    });
</script>

